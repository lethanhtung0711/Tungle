package code;

public class Timkiemnhiphan {
	// Hàm tìm kiếm nhị phân sử dụng thuật toán lặp
	public static int binarySearch(int[] array, int target) {
        int left = 0; // Chỉ số bắt đầu
        int right = array.length - 1; // Chỉ số kết thúc

        while (left <= right) {
            int mid = left + (right - left) / 2; // Tính chỉ số giữa

            // Kiểm tra nếu phần tử giữa là phần tử cần tìm
            if (array[mid] == target) {
                return mid; // Trả về chỉ số nếu tìm thấy
            }

            // Nếu phần tử giữa nhỏ hơn phần tử cần tìm, tìm ở nửa phải
            if (array[mid] < target) {
                left = mid + 1;
            }
            // Nếu phần tử giữa lớn hơn phần tử cần tìm, tìm ở nửa trái
            else {
                right = mid - 1;
            }
        }
        return -1; // Trả về -1 nếu không tìm thấy
    }
	
	// Hàm tìm kiếm nhị phân sử dụng đệ quy
	public static int binarySearchRecursive(int[] array, int target, int left, int right) {
        // Kiểm tra điều kiện dừng
        if (left > right) {
            return -1; // Không tìm thấy
        }

        int mid = left + (right - left) / 2; // Tính chỉ số giữa

        // Kiểm tra nếu phần tử giữa là phần tử cần tìm
        if (array[mid] == target) {
            return mid; // Trả về chỉ số nếu tìm thấy
        }

        // Nếu phần tử giữa nhỏ hơn phần tử cần tìm, tìm ở nửa phải
        if (array[mid] < target) {
            return binarySearchRecursive(array, target, mid + 1, right);
        }
        // Nếu phần tử giữa lớn hơn phần tử cần tìm, tìm ở nửa trái
        else {
            return binarySearchRecursive(array, target, left, mid - 1);
        }
    }
	
	public static void main(String[] args) {
        // Mảng đã được sắp xếp
        int[] array = {13, 23, 36, 53, 58, 59, 72, 79, 81, 83, 88, 95, 107, 117, 130, 133, 174, 181, 199, 203, 215, 226, 269, 270, 293, 295, 300, 332, 342, 358, 359, 367, 377, 384, 385, 391, 397, 404, 408, 418, 418, 430, 432, 443, 460, 480, 482, 483, 503, 525, 529, 535, 556, 585, 609, 611, 616, 617, 669, 675, 676, 689, 690, 693, 704, 725, 744, 752, 768, 770, 771, 803, 805, 809, 810, 815, 817, 826, 828, 839, 854, 865, 872, 887, 888, 908, 920, 932, 998, 999, 1001, 1003, 1011, 1020, 1023, 1037, 1039, 1045, 1068, 1074, 1083, 1083, 1083, 1085, 1095, 1098, 1104, 1109, 1109, 1112, 1113, 1125, 1132, 1141, 1170, 1177, 1189, 1205, 1206, 1219, 1258, 1260, 1268, 1268, 1286, 1286, 1292, 1298, 1305, 1312, 1322, 1326, 1334, 1335, 1349, 1354, 1355, 1360, 1366, 1371, 1405, 1423, 1474, 1476, 1482, 1484, 1490, 1492, 1493, 1504, 1510, 1523, 1539, 1545, 1547, 1553, 1558, 1559, 1560, 1568, 1569, 1579, 1615, 1636, 1656, 1662, 1664, 1674, 1677, 1679, 1680, 1699, 1710, 1712, 1721, 1722, 1724, 1731, 1733, 1736, 1768, 1770, 1805, 1806, 1811, 1847, 1852, 1870, 1878, 1880, 1881, 1890, 1896, 1899, 1910, 1917, 1928, 1937, 1939, 1945, 1946, 1955, 1966, 1981, 1986, 1991, 1999, 2003, 2004, 2016, 2017, 2017, 2037, 2057, 2063, 2072, 2073, 2082, 2092, 2117, 2117, 2124, 2127, 2132, 2139, 2143, 2150, 2157, 2161, 2167, 2174, 2177, 2181, 2188, 2191, 2222, 2227, 2232, 2238, 2239, 2249, 2251, 2264, 2267, 2280, 2290, 2331, 2345, 2361, 2361, 2384, 2400, 2411, 2423, 2432, 2449, 2456, 2456, 2465, 2471, 2477, 2501, 2555, 2558, 2572, 2573, 2603, 2615, 2622, 2624, 2627, 2642, 2646, 2657, 2659, 2665, 2672, 2675, 2713, 2719, 2735, 2754, 2762, 2765, 2787, 2794, 2800, 2801, 2810, 2815, 2825, 2826, 2844, 2874, 2880, 2881, 2889, 2890, 2893, 2895, 2895, 2898, 2904, 2905, 2916, 2954, 2969, 2975, 2980, 2980, 2983, 3005, 3010, 3027, 3036, 3040, 3055, 3058, 3059, 3080, 3085, 3099, 3126, 3135, 3143, 3152, 3167, 3195, 3196, 3203, 3210, 3239, 3240, 3267, 3275, 3287, 3318, 3326, 3351, 3352, 3368, 3372, 3395, 3399, 3407, 3430, 3437, 3449, 3449, 3450, 3465, 3476, 3478, 3484, 3510, 3527, 3529, 3548, 3557, 3558, 3570, 3573, 3575, 3585, 3591, 3594, 3601, 3658, 3665, 3671, 3681, 3685, 3686, 3695, 3712, 3717, 3719, 3725, 3750, 3761, 3764, 3788, 3791, 3792, 3806, 3828, 3830, 3840, 3843, 3860, 3866, 3872, 3908, 3911, 3922, 3927, 3950, 3961, 3979, 3989, 4005, 4017, 4030, 4034, 4061, 4066, 4067, 4072, 4087, 4096, 4110, 4116, 4117, 4127, 4128, 4128, 4135, 4146, 4147, 4165, 4173, 4173, 4174, 4212, 4240, 4248, 4249, 4250, 4253, 4279, 4302, 4321, 4328, 4337, 4350, 4358, 4363, 4365, 4373, 4389, 4389, 4419, 4421, 4438, 4439, 4440, 4442, 4490, 4497, 4509, 4517, 4526, 4537, 4548, 4561, 4572, 4574, 4575, 4589, 4597, 4610, 4611, 4627, 4627, 4634, 4651, 4652, 4667, 4679, 4704, 4730, 4737, 4741, 4752, 4767, 4768, 4776, 4795, 4801, 4814, 4827, 4832, 4834, 4850, 4858, 4870, 4881, 4881, 4885, 4891, 4917, 4927, 4929, 4931, 4933, 4936, 4939, 4941, 4942, 4966, 4982, 4990, 4994, 5038, 5040, 5048, 5049, 5068, 5077, 5081, 5089, 5129, 5132, 5158, 5171, 5183, 5201, 5201, 5208, 5208, 5224, 5229, 5233, 5235, 5241, 5247, 5251, 5263, 5325, 5332, 5334, 5339, 5364, 5365, 5369, 5377, 5379, 5406, 5410, 5410, 5448, 5454, 5462, 5466, 5473, 5477, 5480, 5531, 5533, 5541, 5594, 5603, 5617, 5619, 5658, 5660, 5668, 5674, 5691, 5700, 5709, 5722, 5734, 5742, 5745, 5745, 5748, 5751, 5751, 5762, 5768, 5771, 5779, 5786, 5796, 5815, 5828, 5866, 5895, 5895, 5901, 5907, 5915, 5920, 5922, 5925, 5935, 5944, 5963, 5965, 5975, 5985, 6006, 6008, 6015, 6019, 6054, 6066, 6070, 6102, 6107, 6109, 6111, 6123, 6127, 6133, 6133, 6134, 6149, 6151, 6155, 6171, 6191, 6197, 6198, 6200, 6212, 6223, 6244, 6253, 6284, 6285, 6312, 6315, 6315, 6338, 6356, 6359, 6365, 6372, 6389, 6398, 6406, 6434, 6453, 6459, 6467, 6475, 6477, 6479, 6485, 6486, 6486, 6492, 6509, 6510, 6517, 6522, 6527, 6535, 6554, 6560, 6571, 6585, 6589, 6596, 6633, 6663, 6666, 6689, 6693, 6703, 6735, 6738, 6756, 6776, 6787, 6789, 6791, 6803, 6811, 6814, 6815, 6822, 6825, 6858, 6860, 6873, 6878, 6897, 6899, 6905, 6908, 6922, 6939, 6947, 6951, 6956, 6971, 6972, 6975, 6975, 6978, 6986, 6998, 6999, 7005, 7005, 7041, 7051, 7061, 7074, 7075, 7076, 7119, 7162, 7164, 7166, 7175, 7177, 7216, 7216, 7217, 7218, 7219, 7221, 7230, 7235, 7236, 7261, 7280, 7308, 7333, 7335, 7340, 7344, 7350, 7350, 7374, 7384, 7385, 7406, 7409, 7423, 7448, 7460, 7486, 7490, 7499, 7521, 7528, 7535, 7545, 7567, 7582, 7599, 7609, 7616, 7616, 7632, 7639, 7645, 7654, 7655, 7669, 7677, 7695, 7703, 7709, 7711, 7715, 7730, 7743, 7765, 7782, 7786, 7789, 7806, 7810, 7812, 7815, 7816, 7852, 7854, 7864, 7873, 7876, 7877, 7886, 7887, 7891, 7894, 7904, 7911, 7917, 7931, 7941, 7966, 7987, 7993, 8003, 8024, 8031, 8043, 8051, 8059, 8061, 8068, 8079, 8087, 8108, 8188, 8238, 8253, 8255, 8262, 8291, 8299, 8303, 8308, 8311, 8321, 8333, 8340, 8347, 8349, 8353, 8362, 8366, 8374, 8378, 8379, 8389, 8392, 8403, 8403, 8408, 8416, 8416, 8419, 8434, 8471, 8495, 8502, 8523, 8533, 8543, 8547, 8558, 8562, 8567, 8581, 8585, 8587, 8594, 8596, 8610, 8624, 8626, 8639, 8642, 8663, 8663, 8697, 8698, 8698, 8699, 8731, 8745, 8752, 8772, 8772, 8778, 8789, 8816, 8818, 8818, 8821, 8832, 8837, 8844, 8846, 8873, 8888, 8895, 8899, 8900, 8905, 8913, 8917, 8921, 8932, 8956, 8966, 8969, 8985, 8985, 8987, 8987, 8996, 9008, 9038, 9062, 9074, 9083, 9085, 9103, 9109, 9114, 9118, 9130, 9136, 9137, 9145, 9145, 9173, 9176, 9184, 9218, 9235, 9236, 9238, 9260, 9277, 9299, 9311, 9316, 9334, 9351, 9358, 9378, 9392, 9394, 9405, 9407, 9409, 9410, 9436, 9447, 9450, 9451, 9455, 9463, 9473, 9480, 9487, 9488, 9528, 9550, 9565, 9576, 9586, 9590, 9592, 9617, 9630, 9634, 9636, 9653, 9655, 9657, 9674, 9674, 9675, 9681, 9696, 9700, 9708, 9708, 9709, 9715, 9725, 9745, 9753, 9765, 9778, 9782, 9791, 9795, 9798, 9804, 9811, 9812, 9817, 9826, 9833, 9845, 9851, 9882, 9886, 9895, 9905, 9906, 9907, 9909, 9916, 9918, 9927, 9929, 9930, 9934, 9934, 9935, 9937, 9950, 9957, 9967, 9968, 9986, 9999}; 
        int target = 9238;
        long startTime;
        long endTime;
        long sum = 0;
        long start;
        long end;
        long sum1 = 0;
        int i;
        
        // Gọi hàm tìm kiếm nhị phân
        for(i=0;i<10000;++i) {
        	startTime = System.nanoTime();
        	binarySearch(array, target);
        	endTime = System.nanoTime();
        	sum += endTime - startTime; // Thời gian chạy tính bằng nano giây
        }
        
        // Kiểm tra kết quả tìm kiếm
        int index = binarySearch(array, target);
        if (index != -1) {
        	System.out.println("Lặp:");
            System.out.println("Phần tử " + target + " được tìm thấy tại chỉ số: " + index);
            System.out.println("Thời gian chạy là: " + (sum/10000) + " nanoseconds");
        } else {
        	System.out.println("Lặp:");
            System.out.println("Phần tử " + target + " không được tìm thấy trong mảng.");
        }
        
     // Gọi hàm tìm kiếm nhị phân
        for(i=0;i<10000;i++) {
        	start = System.nanoTime();
        	binarySearchRecursive(array, target, 0, array.length - 1);
        	end = System.nanoTime();
        	sum1 += end - start; // Thời gian chạy tính bằng nano giây
        }
        
        // Kiểm tra kết quả tìm kiếm
		int index1 = binarySearchRecursive(array, target, 0, array.length - 1);
        if (index1 != -1) {
        	System.out.println("Đệ quy:");
            System.out.println("Phần tử " + target + " được tìm thấy tại chỉ số: " + index1);
            System.out.println("Thời gian chạy là: " + (sum1/10000) + " nanoseconds");
        } else {
        	System.out.println("Đệ quy:");
            System.out.println("Phần tử " + target + " không được tìm thấy trong mảng.");
        }
    }
}
